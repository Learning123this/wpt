<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Testdriver extension tutorial &#8212; web-platform-tests  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IDL Tests (idlharness.js)" href="idlharness.html" />
    <link rel="prev" title="testdriver.js Automation" href="testdriver.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="testdriver-extension-tutorial">
<h1>Testdriver extension tutorial<a class="headerlink" href="#testdriver-extension-tutorial" title="Link to this heading">¶</a></h1>
<p>Adding new commands to testdriver.js</p>
<section id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Link to this heading">¶</a></h2>
<p>We assume the following in this writeup:</p>
<ul class="simple">
<li><p>You know what web-platform-tests is and you have a working checkout and can run tests</p></li>
<li><p>You know what <a class="reference external" href="https://w3c.github.io/webdriver/">WebDriver Classic</a> and
<a class="reference external" href="https://w3c.github.io/webdriver-bidi">WebDriver BiDi</a> protocols are</p></li>
<li><p>Familiarity with JavaScript and Python</p></li>
</ul>
</section>
<section id="introduction">
<h2>Introduction!<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>Let’s implement window resizing. We can do this via the <a class="reference external" href="https://w3c.github.io/webdriver/#set-window-rect">Set Window Rect</a> command in WebDriver.</p>
<p>The process of extending <code class="docutils literal notranslate"><span class="pre">testdriver.js</span></code> is similar for <a class="reference external" href="https://w3c.github.io/webdriver/">WebDriver Classic</a> and <a class="reference external" href="https://w3c.github.io/webdriver-bidi">WebDriver BiDi</a> commands. This tutorial highlights the differences inline.</p>
<p>First, we need to think of what the API will look like a little. We will be using WebDriver and Marionette for this, so we can look and see that they take in x, y coordinates, width and height integers.</p>
<p>The first part of this will be browser agnostic, but later we will need to implement a specific layer for each browser (here we will do Firefox and Chrome).</p>
</section>
<section id="rfc-process">
<h2>RFC Process<a class="headerlink" href="#rfc-process" title="Link to this heading">¶</a></h2>
<p>Before we invest any significant work into extending the testdriver.js API, we should check in with other stakeholders of the Web Platform Tests community on the proposed changes, by writing an <a class="reference external" href="https://github.com/web-platform-tests/rfcs">RFC</a> (”request for comments”). This is especially useful for changes that may affect test authors or downstream users of web-platform-tests.</p>
<p>The <a class="reference external" href="https://github.com/web-platform-tests/rfcs#the-rfc-process">process is given in more detail in the RFC repo</a>, but to start let’s send in a PR to the RFCs repo by adding a file named <code class="docutils literal notranslate"><span class="pre">rfcs/testdriver_set_window_rect.md</span></code>:</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span><span class="gh"># RFC N: Add window resizing to testdriver.js</span>
(<span class="ge">*Note: N should be replaced by the PR number*</span>)

<span class="gu">## Summary</span>

Add testdriver.js support for the [<span class="nt">Set Window Rect command</span>](<span class="na">https://w3c.github.io/webdriver/#set-window-rect</span>).

<span class="gu">## Details</span>
(<span class="ge">*add details here*</span>)

<span class="gu">## Risks</span>
(<span class="ge">*add risks here*</span>)
</pre></div>
</div>
<p>Members of the community will then have the opportunity to comment on our proposed changes, and perhaps suggest improvements to our ideas. If all goes well it will be approved and merged in.</p>
<p>With that said, developing a prototype implementation may help others evaluate the proposal during the RFC process, so let’s move on to writing some code.</p>
<p>Note that for extensions to testdriver.js that directly reflect a <a class="reference external" href="https://w3c.github.io/webdriver/">WebDriver Classic</a> command, <a class="reference external" href="https://w3c.github.io/webdriver-bidi">WebDriver BiDi</a> command, or event, the <a class="reference external" href="https://github.com/web-platform-tests/rfcs">RFC</a> process isn’t required.</p>
</section>
<section id="code">
<h2>Code!<a class="headerlink" href="#code" title="Link to this heading">¶</a></h2>
<section id="resources-testdriver-js">
<h3><a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/resources/testdriver.js">resources/testdriver.js</a><a class="headerlink" href="#resources-testdriver-js" title="Link to this heading">¶</a></h3>
<p>This is the main entry point the tests get. Here we need to add a function to the <code class="docutils literal notranslate"><span class="pre">test_driver</span></code> object that will call the <code class="docutils literal notranslate"><span class="pre">test_driver_internal</span></code> object.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">test_driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// other commands...</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">    * Triggers browser window to be resized and relocated</span>
<span class="cm">    *</span>
<span class="cm">    * This matches the behaviour of the {@link</span>
<span class="cm">    * https://w3c.github.io/webdriver/#set-window-rect|WebDriver</span>
<span class="cm">    * Set Window Rect command}.</span>
<span class="cm">    *</span>
<span class="cm">    * @param {Integer} x - The x coordinate of the top left of the window</span>
<span class="cm">    * @param {Integer} y - The y coordinate of the top left of the window</span>
<span class="cm">    * @param {Integer} width - The width of the window</span>
<span class="cm">    * @param {Integer} height - The width of the window</span>
<span class="cm">    * @returns {Promise} fulfilled after window rect is set occurs, or rejected in</span>
<span class="cm">    *                    the cases the WebDriver command errors</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="nx">set_window_rect</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">test_driver_internal</span><span class="p">.</span><span class="nx">set_element_rect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>In the same file, lets add to the internal object. ( do we need to do this?) (make sure to do this if the internal call has different arguments than the external call, especially if it calls multiple internal calls)</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">test_driver_internal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// other commands...</span>

<span class="w">    </span><span class="nx">set_window_rect</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;unimplemented&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>We will leave this unimplemented and override it in another file. Lets do that now!</p>
<section id="webdriver-bidi">
<h4>WebDriver BiDi<a class="headerlink" href="#webdriver-bidi" title="Link to this heading">¶</a></h4>
<p>For commands using WebDriver BiDi, add the methods to <code class="docutils literal notranslate"><span class="pre">test_driver.bidi</span></code>. Parameters are passed as a single object <code class="docutils literal notranslate"><span class="pre">params</span></code>. For example <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/5ec8ba6d68f27d49a056cbf940e3bc9a8324c538/resources/testdriver.js#L183"><code class="docutils literal notranslate"><span class="pre">test_driver.bidi.permissions.set_permission</span></code></a>.</p>
<p>Before calling <code class="docutils literal notranslate"><span class="pre">test_driver_internal</span></code> method, assert the <code class="docutils literal notranslate"><span class="pre">bidi</span></code> testdriver feature is enabled.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">set_permission</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assertBidiIsEnabled</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">test_driver_internal</span><span class="p">.</span><span class="nx">bidi</span><span class="p">.</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">set_permission</span><span class="p">(</span>
<span class="w">        </span><span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="tools-wptrunner-wptrunner-testdriver-extra-js">
<h3><a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/tools/wptrunner/wptrunner/testdriver-extra.js">tools/wptrunner/wptrunner/testdriver-extra.js</a><a class="headerlink" href="#tools-wptrunner-wptrunner-testdriver-extra-js" title="Link to this heading">¶</a></h3>
<p>This will be the default function called when invoking the test driver commands (sometimes it is overridden by testdriver-vendor.js, but that is outside the scope of this tutorial). In most cases this is just boilerplate:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">test_driver_internal</span><span class="p">.</span><span class="nx">set_element_rect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">create_action</span><span class="p">(</span><span class="s2">&quot;set_element_rect&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">create_action</span></code> helper function does the heavy lifting of setting up a postMessage to the wptrunner internals as well as returning a promise that will resolve once the call is complete.</p>
<p>The action’s <code class="docutils literal notranslate"><span class="pre">name</span></code> is important and will be used later when defining the corresponding Python action representation. Keep this name in mind for the next steps.</p>
<section id="id1">
<h4>WebDriver BiDi<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>For actions related to WebDriver BiDi, the <code class="docutils literal notranslate"><span class="pre">name</span></code> should follow the format <code class="docutils literal notranslate"><span class="pre">bidi.{MODULE_NAME}.{COMMAND}</span></code>, for example, <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/testdriver-extra.js#L202"><code class="docutils literal notranslate"><span class="pre">bidi.session.subscribe</span></code></a>.</p>
</section>
</section>
<section id="protocol-part">
<h3>Protocol part<a class="headerlink" href="#protocol-part" title="Link to this heading">¶</a></h3>
<p>Next, this is passed to the executor and protocol in wptrunner. Time to switch to Python!</p>
<p>To add this command, you’ll need to create a corresponding protocol part class in <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/tools/wptrunner/wptrunner/executors/protocol.py">tools/wptrunner/wptrunner/executors/protocol.py</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WindowRectProtocolPart</span><span class="p">(</span><span class="n">ProtocolPart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Protocol part for resizing and changing location of window&quot;&quot;&quot;</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;window_rect&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_window_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the window rect</span>

<span class="sd">        :param x: The x coordinate of the top left of the window.</span>
<span class="sd">        :param y: The y coordinate of the top left of the window.</span>
<span class="sd">        :param width: The width of the window.</span>
<span class="sd">        :param height: The height of the window.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The protocol part’s <code class="docutils literal notranslate"><span class="pre">name</span></code> is important. It will be used when we define the action that uses this protocol part. Make a note of this name for the next steps.</p>
<section id="id2">
<h4>WebDriver BiDi<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<p>When working with WebDriver BiDi, organize protocol parts by WebDriver BiDi modules. Name these parts using the prefix <code class="docutils literal notranslate"><span class="pre">Bidi{ModuleName}ProtocolPart</span></code> (e.g., <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/executors/protocol.py#L388"><code class="docutils literal notranslate"><span class="pre">BidiScriptProtocolPart</span></code></a>) and use the prefix <code class="docutils literal notranslate"><span class="pre">bidi_</span></code> for their corresponding methods (e.g., <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/executors/protocol.py#L392"><code class="docutils literal notranslate"><span class="pre">bidi_script</span></code></a>).</p>
</section>
</section>
<section id="action-representation">
<h3>Action representation<a class="headerlink" href="#action-representation" title="Link to this heading">¶</a></h3>
<p>Next create an action representation in <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/tools/wptrunner/wptrunner/executors/actions.py">tools/wptrunner/wptrunner/executors/actions.py</a>. This defines how the command’s parameters are processed and how the command is executed using the protocol part we defined earlier.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SetWindowRectAction</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;set_window_rect&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">protocol</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="n">protocol</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting window rect to be: x=</span><span class="si">%s</span><span class="s2">, y=</span><span class="si">%s</span><span class="s2">, width=</span><span class="si">%s</span><span class="s2">, height=</span><span class="si">%s</span><span class="s2">&quot;</span>
                          <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">window_rect</span><span class="o">.</span><span class="n">set_window_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> property should match the <code class="docutils literal notranslate"><span class="pre">name</span></code> used in <a class="reference external" href="#tools-wptrunner-wptrunner-testdriver-extra-js">tools/wptrunner/wptrunner/testdriver-extra.js</a>. This name acts as the key that connects the testdriver function in JavaScript with its corresponding Python action.</p>
<p>You can access the <code class="docutils literal notranslate"><span class="pre">WindowRectProtocolPart</span></code> using its name <code class="docutils literal notranslate"><span class="pre">window_rect</span></code> we defined earlier:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">window_rect</span><span class="o">.</span><span class="n">set_window_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>Then add your newly created class to the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/executors/actions.py#L514"><code class="docutils literal notranslate"><span class="pre">actions</span> <span class="pre">=</span> <span class="pre">[...]</span></code></a> list at the end of the file.</p>
<p>Don’t forget to write docs in <code class="docutils literal notranslate"><span class="pre">testdriver.md</span></code>.</p>
<section id="id3">
<h4>WebDriver BiDi<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<p>For WebDriver BiDi actions, add the new action representation class to <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/executors/asyncactions.py"><code class="docutils literal notranslate"><span class="pre">tools/wptrunner/wptrunner/executors/asyncactions.py</span></code></a> and include it in the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/107c5fc03139b3247920a0f40983bd1fe4d1fac2/tools/wptrunner/wptrunner/executors/asyncactions.py#L35C1-L35C14"><code class="docutils literal notranslate"><span class="pre">async_actions</span> <span class="pre">=</span> <span class="pre">[...]</span></code></a> list.</p>
<p>Note that the BiDi actions’ <code class="docutils literal notranslate"><span class="pre">__call__</span></code> can be <code class="docutils literal notranslate"><span class="pre">async</span></code>.</p>
</section>
</section>
<section id="browser-specific-implementations">
<h3>Browser specific implementations<a class="headerlink" href="#browser-specific-implementations" title="Link to this heading">¶</a></h3>
<p>Now we write the browser specific implementations.</p>
<section id="chrome">
<h4>Chrome<a class="headerlink" href="#chrome" title="Link to this heading">¶</a></h4>
<p>We will modify <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/tools/wptrunner/wptrunner/executors/executorwebdriver.py">executorwebdriver.py</a> and use the WebDriver API.</p>
<p>There isn’t too much work to do here, we just need to define a subclass of the protocol part we defined earlier.</p>
<section id="implement-protocol-part">
<h5>Implement protocol part<a class="headerlink" href="#implement-protocol-part" title="Link to this heading">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WebDriverWindowRectProtocolPart</span><span class="p">(</span><span class="n">WindowRectProtocolPart</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webdriver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">webdriver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_window_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">webdriver</span><span class="o">.</span><span class="n">set_window_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>Make sure to import the protocol part too!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">.protocol</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">BaseProtocolPart</span><span class="p">,</span>
                       <span class="n">TestharnessProtocolPart</span><span class="p">,</span>
                       <span class="n">Protocol</span><span class="p">,</span>
                       <span class="n">SelectorProtocolPart</span><span class="p">,</span>
                       <span class="n">ClickProtocolPart</span><span class="p">,</span>
                       <span class="n">SendKeysProtocolPart</span><span class="p">,</span>
                       <span class="p">{</span><span class="o">...</span> <span class="n">other</span> <span class="n">protocol</span> <span class="n">parts</span><span class="p">}</span>
                       <span class="n">WindowRectProtocolPart</span><span class="p">,</span> <span class="c1"># add this!</span>
                       <span class="n">TestDriverProtocolPart</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we have the setup method which just redefines the webdriver object at this level. The important part is the <code class="docutils literal notranslate"><span class="pre">set_window_rect</span></code> function (and it’s important it is named that since we called it that earlier). This will call the WebDriver API for <a class="reference external" href="https://w3c.github.io/webdriver/#set-window-rect">set window rect</a>.</p>
<section id="id4">
<h6>WebDriver BiDi<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h6>
<p>You can access the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/tools/webdriver/webdriver/bidi/client.py#L13">BidiSession</a> through the webdriver object using <code class="docutils literal notranslate"><span class="pre">self.webdriver.bidi_session</span></code>, similar to how it’s done for the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/tools/wptrunner/wptrunner/executors/executorwebdriver.py#L214C22-L214C49"><code class="docutils literal notranslate"><span class="pre">WebDriverBidiScriptProtocolPart.call_function</span></code></a>.</p>
</section>
</section>
<section id="webdriver-classic-only-extend-webdriverprotocol-implementation">
<h5>(WebDriver Classic only) Extend <code class="docutils literal notranslate"><span class="pre">WebDriverProtocol</span></code> implementation<a class="headerlink" href="#webdriver-classic-only-extend-webdriverprotocol-implementation" title="Link to this heading">¶</a></h5>
<p>Finally, we just need to tell the WebDriverProtocol to implement this part.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WebDriverProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">implements</span> <span class="o">=</span> <span class="p">[</span><span class="n">WebDriverBaseProtocolPart</span><span class="p">,</span>
                  <span class="n">WebDriverTestharnessProtocolPart</span><span class="p">,</span>
                  <span class="n">WebDriverSelectorProtocolPart</span><span class="p">,</span>
                  <span class="n">WebDriverClickProtocolPart</span><span class="p">,</span>
                  <span class="n">WebDriverSendKeysProtocolPart</span><span class="p">,</span>
                  <span class="p">{</span><span class="o">...</span> <span class="n">other</span> <span class="n">protocol</span> <span class="n">parts</span><span class="p">}</span>
                  <span class="n">WebDriverWindowRectProtocolPart</span><span class="p">,</span> <span class="c1"># add this!</span>
                  <span class="n">WebDriverTestDriverProtocolPart</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="webdriver-bidi-only-extend-webdriverbidiprotocol-implementation">
<h5>(WebDriver BiDi only) Extend <code class="docutils literal notranslate"><span class="pre">WebDriverBidiProtocol</span></code> implementation<a class="headerlink" href="#webdriver-bidi-only-extend-webdriverbidiprotocol-implementation" title="Link to this heading">¶</a></h5>
<p>To make this new WebDriver BiDi command available, add the newly added protocol part implementation (e.g., <code class="docutils literal notranslate"><span class="pre">WebDriverBidiScriptProtocolPart</span></code>) to the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/tools/wptrunner/wptrunner/executors/executorwebdriver.py#L681"><code class="docutils literal notranslate"><span class="pre">implements</span></code></a> list of the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/tools/wptrunner/wptrunner/executors/executorwebdriver.py#L679C7-L679C28"><code class="docutils literal notranslate"><span class="pre">WebDriverBidiProtocol</span></code></a> class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WebDriverBidiProtocol</span><span class="p">(</span><span class="n">WebDriverProtocol</span><span class="p">):</span>
    <span class="n">enable_bidi</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">implements</span> <span class="o">=</span> <span class="p">[{</span><span class="o">...</span> <span class="n">other</span> <span class="n">bidi</span> <span class="n">protocol</span> <span class="n">parts</span><span class="p">},</span>
                  <span class="n">WebDriverBidiScriptProtocolPart</span><span class="p">,</span> <span class="c1"># add this</span>
                  <span class="o">*</span><span class="p">(</span><span class="n">part</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">WebDriverProtocol</span><span class="o">.</span><span class="n">implements</span><span class="p">)</span>
                  <span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="firefox">
<h4>Firefox<a class="headerlink" href="#firefox" title="Link to this heading">¶</a></h4>
<!-- TODO: Document adding WebDriver BiDi protocol parts. --><p>We use the <a class="reference external" href="https://firefox-source-docs.mozilla.org/python/marionette_driver.html#marionette_driver.marionette.Marionette.set_window_rect">set window rect</a> Marionette command.</p>
<p>We will modify <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/tools/wptrunner/wptrunner/executors/executormarionette.py">executormarionette.py</a> and use the Marionette Python API.</p>
<p>We have little actual work to do here! We just need to define a subclass of the protocol part we defined earlier.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MarionetteWindowRectProtocolPart</span><span class="p">(</span><span class="n">WindowRectProtocolPart</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marionette</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">marionette</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_window_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">marionette</span><span class="o">.</span><span class="n">set_window_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>Make sure to import the protocol part too!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">.protocol</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">BaseProtocolPart</span><span class="p">,</span>
                       <span class="n">TestharnessProtocolPart</span><span class="p">,</span>
                       <span class="n">Protocol</span><span class="p">,</span>
                       <span class="n">SelectorProtocolPart</span><span class="p">,</span>
                       <span class="n">ClickProtocolPart</span><span class="p">,</span>
                       <span class="n">SendKeysProtocolPart</span><span class="p">,</span>
                       <span class="p">{</span><span class="o">...</span> <span class="n">other</span> <span class="n">protocol</span> <span class="n">parts</span><span class="p">}</span>
                       <span class="n">WindowRectProtocolPart</span><span class="p">,</span> <span class="c1"># add this!</span>
                       <span class="n">TestDriverProtocolPart</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we have the setup method which just redefines the webdriver object at this level. The important part is the <code class="docutils literal notranslate"><span class="pre">set_window_rect</span></code> function (and it’s important it is named that since we called it that earlier). This will call the Marionette API for <a class="reference external" href="https://firefox-source-docs.mozilla.org/python/marionette_driver.html#marionette_driver.marionette.Marionette.set_window_rect">set window rect</a> (<code class="docutils literal notranslate"><span class="pre">self.marionette</span></code> is a marionette instance here).</p>
<p>Finally, we just need to tell the MarionetteProtocol to implement this part.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MarionetteProtocol</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">implements</span> <span class="o">=</span> <span class="p">[</span><span class="n">MarionetteBaseProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionetteTestharnessProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionettePrefsProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionetteStorageProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionetteSelectorProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionetteClickProtocolPart</span><span class="p">,</span>
                  <span class="n">MarionetteSendKeysProtocolPart</span><span class="p">,</span>
                  <span class="p">{</span><span class="o">...</span> <span class="n">other</span> <span class="n">protocol</span> <span class="n">parts</span><span class="p">}</span>
                  <span class="n">MarionetteWindowRectProtocolPart</span><span class="p">,</span> <span class="c1"># add this</span>
                  <span class="n">MarionetteTestDriverProtocolPart</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="other-browsers">
<h4>Other Browsers<a class="headerlink" href="#other-browsers" title="Link to this heading">¶</a></h4>
<p>Other browsers (such as safari) may use executorselenium, or a completely new executor (such as servo). For these, you must change the executor in the same way as we did with chrome and firefox.</p>
</section>
</section>
<section id="write-an-infra-test">
<h3>Write an infra test<a class="headerlink" href="#write-an-infra-test" title="Link to this heading">¶</a></h3>
<p>Make sure to add a test to <code class="docutils literal notranslate"><span class="pre">infrastructure/testdriver</span></code> :)</p>
<p>Here is some template code!</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>TestDriver set window rect method<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/resources/testharness.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/resources/testharnessreport.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/resources/testdriver.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/resources/testdriver-vendor.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="nx">promise_test</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">test_driver</span><span class="p">.</span><span class="nx">set_window_rect</span><span class="p">(</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// do something</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<section id="id5">
<h4>WebDriver BiDi<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<p>For an example of how to write an infra test for a WebDriver BiDi command, you can refer to the existing test for <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/infrastructure/webdriver/bidi/subscription.html"><code class="docutils literal notranslate"><span class="pre">test_driver.bidi.log.entry_added</span></code></a>.</p>
<!-- TODO: replace example with directly mapped method like `test_driver.bidi.permissions.set_permission`, once it is implemented --></section>
</section>
<section id="what-about-testdriver-vendor-js">
<h3>What about testdriver-vendor.js?<a class="headerlink" href="#what-about-testdriver-vendor-js" title="Link to this heading">¶</a></h3>
<p>The file <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/master/resources/testdriver-vendor.js">testdriver-vendor.js</a> is the equivalent to testdriver-extra.js above, except it is
run instead of testdriver-extra.js in browser-specific test environments. For example, in <a class="reference external" href="https://cs.chromium.org/chromium/src/third_party/blink/web_tests/">Chromium web_tests</a>.</p>
</section>
<section id="what-if-i-need-to-return-a-value-from-my-testdriver-api">
<h3>What if I need to return a value from my testdriver API?<a class="headerlink" href="#what-if-i-need-to-return-a-value-from-my-testdriver-api" title="Link to this heading">¶</a></h3>
<p>You can return values from testdriver by just making your Action and Protocol classes use return statements. The data being returned will be serialized into JSON and passed back to the test on the resolving promise. The test can then deserialize the JSON to access the return values. Here is an example of a theoretical GetWindowRect API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">GetWindowRectAction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;get_window_rect&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">window_rect</span><span class="o">.</span><span class="n">get_window_rect</span><span class="p">()</span>
</pre></div>
</div>
<p>Extend pProtocol part:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WindowRectProtocolPart</span><span class="p">(</span><span class="n">ProtocolPart</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_window_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>And implement it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">WebDriverWindowRectProtocolPart</span><span class="p">(</span><span class="n">WindowRectProtocolPart</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_window_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The communication channel between testharness and backend is blocked until the end of the action.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">webdriver</span><span class="o">.</span><span class="n">get_window_rect</span><span class="p">()</span>
</pre></div>
</div>
<p>Then a test can access the return value as follows:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="nx">async_test</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">test_driver</span><span class="p">.</span><span class="nx">get_window_rect</span><span class="p">()</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assert_equals</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert_equals</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert_equals</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="mf">800</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert_equals</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="w"> </span><span class="mf">600</span><span class="p">)</span>
<span class="w">    </span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
<span class="w">  </span><span class="p">})</span>
<span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="what-if-i-need-to-run-an-async-code-in-the-action">
<h3>What if I need to run an async code in the action?<a class="headerlink" href="#what-if-i-need-to-run-an-async-code-in-the-action" title="Link to this heading">¶</a></h3>
<p>For actions that involve asynchronous operations, <code class="docutils literal notranslate"><span class="pre">async_actions</span></code> provide a non-blocking approach. Similar to the <a class="reference external" href="https://github.com/web-platform-tests/wpt/blob/b142861632efcdec53a86ef9ca26c8b79474493b/tools/wptrunner/wptrunner/executors/asyncactions.py#L18"><code class="docutils literal notranslate"><span class="pre">BidiSessionSubscribeAction</span></code></a> example:</p>
<!-- TODO: replace example with directly mapped method like `test_driver.bidi.permissions.set_permission`, once it is implemented --><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="c1"># The communication channel between testharness and backend is not blocked.</span>
        <span class="o">...</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="o">.</span><span class="n">bidi_events</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">events</span><span class="p">,</span> <span class="n">contexts</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">web-platform-tests</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../test-suite-design.html">Test Suite Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro-video-transcript.html">“Introduction to WPT” video transcript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running-tests/index.html">Running Tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Writing Tests</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#test-types">Test Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#submitting-tests">Submitting Tests</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reviewing-tests/index.html">Reviewing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Project Administration</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Writing Tests</a><ul>
  <li><a href="testharness.html">JavaScript Tests (testharness.js)</a><ul>
      <li>Previous: <a href="testdriver.html" title="previous chapter">testdriver.js Automation</a></li>
      <li>Next: <a href="idlharness.html" title="next chapter">IDL Tests (idlharness.js)</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2019, wpt contributors.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/writing-tests/testdriver-extension-tutorial.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>